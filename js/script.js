var main=d3.select("main"),scrolly=main.select("#scrolly"),figure=scrolly.select("figure"),article=scrolly.select("article"),step=article.selectAll(".step"),container2=d3.select("#scroll2"),scroller=scrollama(),scroller2=scrollama();function handleResize(){var e=Math.floor(.75*window.innerHeight);step.style("height",e+"px");var t=window.innerHeight/2;figure.style("height",t+"px"),800<window.innerWidth?figure.style("height","px"*t).style("top",0+t/2+"px"):(step.style("height",e+"px"),figure.style("height",t+"px").style("top","0px")),scroller.resize()}function handleStepEnter(l){step.classed("is-active",function(e,t){return t===l.index});var e=l.element.id;figure.select("p").text(e)}function handleStepEnter2(e){console.log(e.element),document.querySelector("#nav-container").classList.add("nav-container-sticky")}function handleStepExit2(e){console.log(e),document.querySelector("#nav-container").classList.remove("nav-container-sticky")}function handleProgress2(e){console.log("progress",e)}function setupStickyfill(){d3.selectAll(".sticky").each(function(){Stickyfill.add(this)})}function init(){setupStickyfill(),handleResize(),scroller.setup({step:"#scrolly article .step",offset:.66,debug:!0}).onStepEnter(handleStepEnter),scroller2.setup({step:"#scroll2 #main-container",offset:0,debug:!0,progress:!0,threshold:100}).onStepEnter(handleStepEnter2).onStepExit(handleStepExit2).onStepProgress(handleProgress2),window.addEventListener("resize",handleResize)}init();